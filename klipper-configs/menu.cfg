[menu __prepare]
type: list
enable: !toolhead.is_printing
name: Prepare
items:
        .__hotend_pid_tuning
        .__hotbed_pid_tuning
        .__host_restart
        .__firmware_restart
        .bedscrews
        .meshBed

[menu __prepare bedscrews]
type: list
enable: !toolhead.is_printing
name: Adjust screws
enter_gcode:
        G28
        BED_SCREWS_ADJUST
show_back: False
items:
        .accept
        .adjusted
        .abort

[menu __prepare bedscrews accept]
type: command
name: Accept
gcode: ACCEPT

[menu __prepare bedscrews adjusted]
type: command
name: Adjusted
gcode: ADJUSTED

[menu __prepare bedscrews abort]
type: command
name: Abort
gcode: ABORT
action: back

[menu __prepare meshBed]
type: list
enable: !toolhead.is_printing
name: Mesh Bed Level
items:
        .start
        .zposition
        .zNudgeDown
        .zNudgeUp
        .next
        .save

[menu __prepare meshBed zposition]
type: item
name: "Z Pos= {0:05.3f}"
parameter: toolhead.zpos

[menu __prepare meshBed start]
type: command
name: Start Calibration
gcode:
        G28
        BED_MESH_CALIBRATE
        TESTZ Z=-5

[menu __prepare meshBed zNudgeDown]
type: command
name: Nudge Down
gcode: TESTZ Z=-0.025

[menu __prepare meshBed zNudgeUp]
type: command
name: Nudge Up
gcode: TESTZ Z=0.025

[menu __prepare meshBed next]
type: command
name: Next
gcode:
        ACCEPT
        TESTZ Z=-5

[menu __prepare meshBed save]
type: command
name: Save & Restart
gcode: SAVE_CONFIG

[menu __filament __load]
type: command
name: Load Filament
gcode:
    M83
    G1 E50 F1000
    G1 E50 F1000
    G1 E20 F300
    M82

[menu __filament __unload]
type: command
name: Unload Filament
gcode:
    M83
    G1 E-50 F1000
    G1 E-50 F1000
    G1 E-20 F1800
    M82
